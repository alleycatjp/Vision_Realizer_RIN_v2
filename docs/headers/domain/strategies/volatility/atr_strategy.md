# ========================================
# 📄 atr_strategy.py - ATRブレイク戦術（volatility層）
# ----------------------------------------
# ■ 目的（ファイルの存在意義：詳細に）:
#   ATR（平均的な価格変動幅）に基づき、急激な価格変動を検出し、
#   トレンド発生時の buy / sell タイミングを判断する戦術を提供する。
#
# ■ 想定ユースケース（使用状況）:
#   application/strategy_executor.py により market_state == "volatility" の条件下で呼び出され、
#   高ボラティリティ環境でのブレイクアウトトリガーとして機能する。
#
# ■ 設計思想・背景:
#   過去の平均変動幅（ATR）と比較し、現状の価格変動が異常値かどうかを評価。
#   反応速度よりも変動幅重視の構造で、閾値（k倍）に基づく単純なブレイク判定。
#
# ■ 実現機能（詳細に）:
#   - ATR（期間14）の計算（true rangeの移動平均）
#   - 終値の急変動検出（前日終値±k×ATRによるブレイク判定）
#   - signal（buy / sell / hold）とscore（+1 / -1 / 0）を返却
#
# ■ 外部依存・前提:
#   - dfには "high" / "low" / "close" カラムを含むこと
#   - 最低 period + 2 行のデータが必要（デフォルト16行）
#
# ■ 主な処理フロー:
#   true range 算出 → ATR計算 → 閾値比較 → signal / score 出力
#
# ■ 注意点・構造補足:
#   - シグナルは "close" の急変に限定（intraday対応なし）
#   - 現状スコアは定数（乖離率スコア化構想あり）
#
# ■ 開発再開時のポイント:
#   - ATR閾値(k)やperiodをparams.jsonに外部化
#   - volume等との複合シグナル対応検討
# ========================================
