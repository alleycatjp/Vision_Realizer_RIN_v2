# ========================================
# 📄 rin_bb_strategy.py - BBブレイク戦術（trend層）
# ----------------------------------------
# ■ 目的（ファイルの存在意義：詳細に）:
#   ボリンジャーバンド（移動平均＋標準偏差）を用いて、
#   バンド幅と価格位置からトレンドの加速／反転を定量的に検出し、アクションを決定する。
#
# ■ 想定ユースケース（使用状況）:
#   application/strategy_executor.py により market_state == "trend" の条件下で呼び出され、
#   BB帯域のブレイク・反発を根拠に buy / sell / hold を判定する。
#
# ■ 設計思想・背景:
#   バンドブレイク型の順張り・逆張りシグナルを兼備し、
#   アクション強度を score として定量化する構造を目指す。
#
# ■ 対象市場状態:
#   - trend（トレンド相場向け）
#
# ■ 出力構造（評価結果フォーマット）:
#   {
#     "strategy": "bb",
#     "action": "sell",
#     "score": 0.64,
#     "band_width": ...,        # σ幅（上下バンド差）
#     "price_position": ...     # 現在価格の帯域内位置（-1〜+1正規化）
#   }
#
# ■ 実現機能（実装済）:
#   - evaluate_bb(pair, price_data)
#       - 移動平均（20期間）と1σバンド計算
#       - ブレイク時に buy / sell 判定（帯域外）
#       - 帯域内は hold（+/-1を基準に正規化）
#
# ■ 外部依存・前提:
#   - price_data は DataFrame形式で "close" カラムを含むこと
#   - 呼び出し元が market_state == "trend" であること
#
# ■ 注意点・構造補足:
#   - 出力形式は application/strategy_executor.py と統一（strategy / action / score）
#   - MA期間やσ倍率は固定値（将来的に config/params.json へ移行予定）
#
# ■ 開発再開時のポイント:
#   - パラメータ外部化（可変window / σ倍率）
#   - スコアの高度化（乖離率・勢い指標等との連動構想）
#   - MACDなど他戦術との複合判断化
# ========================================
